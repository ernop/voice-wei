<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Voice-Wei: Voice-controlled scale practice for singers and musicians">
    <meta name="robots" content="noindex, nofollow">
    <title>Scales - Voice-Wei</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="scales.css">
</head>

<body>
    <div class="container">
        <header>
            <div class="header-top">
                <h1>Scales</h1>
                <span class="version-label">v00.00015</span>
                <nav class="nav-tabs">
                    <a href="scales.html" class="nav-tab active">Scales</a>
                    <a href="pitch-meter.html" class="nav-tab">Pitch</a>
                    <a href="player.html" class="nav-tab">Music</a>
                </nav>
            </div>
        </header>

        <main>
            <div class="voice-controls-row">
                <button id="listenBtn" class="listen-button" aria-label="Start listening">
                    <span class="button-text">Listen</span>
                    <span class="button-icon">&#9835;</span>
                </button>
                <button id="stopBtn" class="stop-button" aria-label="Stop playback">
                    <span class="button-text">Stop</span>
                    <span class="button-icon">&#9632;</span>
                </button>
                <button id="againBtn" class="play-button" aria-label="Play">
                    <span class="button-text">Play</span>
                    <span class="button-icon">&#9654;</span>
                </button>
                <button id="submitBtn" class="submit-button-large" style="display: none;"
                    aria-label="Submit">Submit</button>
            </div>

            <div class="transcript-container" id="transcriptContainer" style="display: none;">
                <p class="transcript-label">You said:</p>
                <p class="transcript" id="transcript"></p>
            </div>

            <!-- Piano Keyboard -->
            <div class="piano-container">
                <div class="piano-notification-area" id="pianoNotificationArea">
                    <table class="piano-notification-table" aria-label="Piano notification">
                        <tr id="pianoNotificationRow"></tr>
                    </table>
                    <div class="piano-notification-runtime" id="statusRuntime">Loading piano...</div>
                </div>
                <div class="piano-keys" id="pianoKeys"></div>
            </div>

            <!-- Pattern Preview -->
            <div class="pattern-preview-container">
                <div class="pattern-preview" id="patternPreview"></div>
            </div>

            <!-- Voice-First Scale Builder - All Bidirectional Controls -->
            <div class="voice-first-ui">
                <p class="vf-instruction" id="vfInstruction">Say any option below to set it, or click directly. <button
                        class="vf-dismiss" id="dismissInstruction">x</button></p>

                <div class="vf-row">
                    <span class="vf-label">Repeat</span>
                    <div class="vf-options">
                        <button class="vf-btn" data-repeat="0">off</button>
                        <button class="vf-btn" data-repeat="1">once</button>
                        <button class="vf-btn" data-repeat="2">twice</button>
                        <button class="vf-btn" data-repeat="Infinity">foreverer</button>
                        <button class="vf-btn" data-repeat="Infinity-nogap">forever no gap</button>
                    </div>
                    <span class="vf-label vf-label-inline">Rising</span>
                    <div class="vf-options">
                        <button class="vf-btn" data-rising="0">off</button>
                        <button class="vf-btn" data-rising="1">half</button>
                        <button class="vf-btn" data-rising="2">whole</button>
                        <button class="vf-btn" data-rising="3">minor third</button>
                        <button class="vf-btn" data-rising="4">major third</button>
                        <button class="vf-btn" data-rising="5">perfect fourth</button>
                        <button class="vf-btn" data-rising="7">perfect fifth</button>
                    </div>
                </div>

                <div class="vf-row">
                    <span class="vf-label">Direction</span>
                    <div class="vf-options">
                        <button class="vf-btn" data-direction="ascending">up</button>
                        <button class="vf-btn" data-direction="descending">down</button>
                        <button class="vf-btn" data-direction="both">up+down</button>
                        <button class="vf-btn" data-direction="down_and_up">down+up</button>
                    </div>
                    <span class="vf-label vf-label-inline">Move</span>
                    <div class="vf-options">
                        <button class="vf-btn" data-movement="normal">normal</button>
                        <button class="vf-btn" data-movement="stop_and_go">stop-and-go</button>
                        <button class="vf-btn" data-movement="one_three_five">1-3-5</button>
                        <button class="vf-btn" data-movement="from_one">from 1</button>
                    </div>
                </div>

                <div class="vf-row">
                    <span class="vf-label">Root</span>
                    <div class="vf-options">
                        <button class="vf-btn" data-root="C">C</button>
                        <button class="vf-btn vf-btn-sharp" data-root="C#">C#</button>
                        <button class="vf-btn" data-root="D">D</button>
                        <button class="vf-btn vf-btn-sharp" data-root="D#">D#</button>
                        <button class="vf-btn" data-root="E">E</button>
                        <button class="vf-btn" data-root="F">F</button>
                        <button class="vf-btn vf-btn-sharp" data-root="F#">F#</button>
                        <button class="vf-btn" data-root="G">G</button>
                        <button class="vf-btn vf-btn-sharp" data-root="G#">G#</button>
                        <button class="vf-btn" data-root="A">A</button>
                        <button class="vf-btn vf-btn-sharp" data-root="A#">A#</button>
                        <button class="vf-btn" data-root="B">B</button>
                    </div>
                    <span class="vf-label vf-label-inline">Octave</span>
                    <div class="vf-options">
                        <button class="vf-btn" data-octave="3">3</button>
                        <button class="vf-btn" data-octave="4">4</button>
                    </div>
                </div>

                <div class="vf-row">
                    <span class="vf-label">Scale</span>
                    <div class="vf-options">
                        <button class="vf-btn" data-scale-type="major">major</button>
                        <button class="vf-btn" data-scale-type="minor">minor</button>
                        <button class="vf-btn" data-scale-type="chromatic">chromatic</button>
                        <button class="vf-btn" data-scale-type="pentatonic">pentatonic</button>
                        <button class="vf-btn" data-scale-type="harmonic_minor">harmonic minor</button>
                        <button class="vf-btn" data-scale-type="melodic_minor">melodic minor</button>
                    </div>
                </div>

                <div class="vf-row">
                    <span class="vf-label">Length</span>
                    <div class="vf-options">
                        <button class="vf-btn" data-length="0">0.15s</button>
                        <button class="vf-btn" data-length="1">0.3s</button>
                        <button class="vf-btn" data-length="2">0.5s</button>
                        <button class="vf-btn" data-length="3">0.8s</button>
                        <button class="vf-btn" data-length="4">1s</button>
                        <button class="vf-btn" data-length="5">1.5s</button>
                        <button class="vf-btn" data-length="6">2s</button>
                        <button class="vf-btn" data-length="7">3s</button>
                        <button class="vf-btn" data-length="8">5s</button>
                    </div>
                </div>

                <div class="vf-row">
                    <span class="vf-label">Gap</span>
                    <div class="vf-options">
                        <button class="vf-btn" data-gap="-1s">-1s</button>
                        <button class="vf-btn" data-gap="-0.5s">-0.5s</button>
                        <button class="vf-btn" data-gap="-0.25s">-0.25s</button>
                        <button class="vf-btn" data-gap="0s">0s</button>
                        <button class="vf-btn" data-gap="0.05s">0.05s</button>
                        <button class="vf-btn" data-gap="0.1s">0.1s</button>
                        <button class="vf-btn" data-gap="0.15s">0.15s</button>
                        <button class="vf-btn" data-gap="0.3s">0.3s</button>
                        <button class="vf-btn" data-gap="0.5s">0.5s</button>
                        <button class="vf-btn" data-gap="1s">1s</button>
                    </div>
                </div>

                <div class="vf-row vf-row-reset">
                    <span class="vf-label"></span>
                    <div class="vf-options">
                        <button id="resetBtn" class="vf-reset-btn">Reset</button>
                    </div>
                </div>
            </div>

            <!-- Voice Control Commands -->
            <div class="voice-control-commands">
                <span class="vcc-label">Voice controls:</span>
                <code>stop</code>
                <code>play</code>
                <label class="echo-toggle">
                    <input type="checkbox" id="echoCommandsToggle">
                    <span>Echo</span>
                </label>
            </div>

            <!-- Saved Configurations (Presets) -->
            <div class="command-history" id="presetHistory">
                <div class="history-header">
                    <h3>Saved Configs</h3>
                    <div class="history-actions">
                        <input id="presetNameInput" class="preset-name-input" type="text"
                            placeholder="Name this config (optional)" />
                        <button id="savePresetBtn" class="copy-all-history-btn"
                            title="Save current settings">Save</button>
                        <button id="applyPresetBtn" class="copy-all-history-btn"
                            title="Apply selected config">Apply</button>
                        <button id="deletePresetBtn" class="clear-history-btn"
                            title="Delete selected config">Delete</button>
                    </div>
                </div>
                <div class="history-list" id="presetList">
                    <p class="history-empty">No saved configs yet</p>
                </div>
            </div>

            <!-- Command History -->
            <div class="command-history" id="commandHistory">
                <div class="history-header">
                    <h3>Command History</h3>
                    <div class="history-actions">
                        <button id="copyAllHistoryBtn" class="copy-all-history-btn" title="Copy all history">Copy
                            All</button>
                        <button id="clearHistoryBtn" class="clear-history-btn">Clear</button>
                    </div>
                </div>
                <div class="history-list" id="historyList">
                    <p class="history-empty">No commands yet</p>
                </div>
            </div>

            <!-- Voice Settings (moved to bottom) -->
            <details class="voice-settings-section">
                <summary>Voice Settings</summary>
                <div class="settings-row voice-settings">
                    <div class="setting-group">
                        <label for="voiceSelect">Voice:</label>
                        <select id="voiceSelect">
                            <option value="">Default</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label for="voiceRate">Speed:</label>
                        <input type="range" id="voiceRate" min="0.5" max="2" step="0.1" value="1">
                        <span id="voiceRateValue">1x</span>
                    </div>
                    <div class="setting-group">
                        <label for="voicePitch">Pitch:</label>
                        <input type="range" id="voicePitch" min="0.5" max="1.5" step="0.1" value="1">
                        <span id="voicePitchValue">1</span>
                    </div>
                    <button id="testVoiceBtn" class="test-voice-btn">Test</button>
                </div>
            </details>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <script src="voice-command-core.js"></script>
    <script src="scales.js"></script>
</body>

</html>